function setMainColor(){if(window.location.hash)switch(window.location.hash.length){case 7:window.mainColor=window.location.hash.toUpperCase();break;case 6:window.mainColor="#"+window.location.hash.toUpperCase()}else{var n=window.location.pathname,t=/([a-f\d]{6})$/i.exec(n);t&&t[1]&&(window.mainColor="#"+t[1])}}function RGBToHSL(n){var t,e,a,o,r,i,s=n[0],c=n[1],l=n[2];return t=Math.min(s,Math.min(c,l)),e=Math.max(s,Math.max(c,l)),a=e-t,i=(t+e)/2,r=0,i>0&&i<1&&(r=a/(i<.5?2*i:2-2*i)),o=0,a>0&&(e===s&&e!==c&&(o+=(c-l)/a),e===c&&e!==l&&(o+=2+(l-s)/a),e===l&&e!==s&&(o+=4+(s-c)/a),o/=6),[o,r,i]}function HEXToRGB(n){return 7===n.length?[parseInt("0x"+n.substring(1,3))/255,parseInt("0x"+n.substring(3,5))/255,parseInt("0x"+n.substring(5,7))/255]:4===n.length&&[parseInt("0x"+n.substring(1,2))/15,parseInt("0x"+n.substring(2,3))/15,parseInt("0x"+n.substring(3,4))/15]}function getColorDifference(n,t){for(var e=[],a=0,o=0;o<3;o++){var r=Math.max(n[o],t[o]),i=Math.min(n[o],t[o]);e[o]=r>0?i/r*100:100,a+=e[o]}return a/3}function backgroundColorChange(n){var t=this.innerHTML||n;RGBToHSL(HEXToRGB(t))[2]<=.48?body.className="inverted":body.className="",body.style.backgroundColor=t,n||(this.style.backgroundColor=t);for(var e=[],a=backgroundColors.length,o=0;o<a;){var r=backgroundColors[o].getElementsByTagName("span")[0];e.push(r.innerHTML),o++}Cookies.set("backgroundColors",e.toString()),Cookies.set("currentBackgroundColor",t)}var Cookies={set:function(n,t,e,a,o,r){var i=new Date,s=new Date(i.getTime()+63072e6);return e=e||s.toGMTString(),document.cookie=n+"="+escape(t)+(e?"; expires="+e:"")+(a?"; path="+a:"")+(o?"; domain="+o:"")+(r?"; secure":""),t},get:function(n){var t=" "+document.cookie,e=" "+n+"=",a=null,o=0,r=0;return t.length>0&&-1!==(o=t.indexOf(e))&&(o+=e.length,-1===(r=t.indexOf(";",o))&&(r=t.length),a=unescape(t.substring(o,r))),a}},Watch={start:function(n,t,e){if(n.watchInterval=n.watchInterval||{},!n.watchInterval[t]){var a=n[t];n.watchInterval[t]=setInterval(function(){a!==n[t]&&(e(n),a=n[t])},10)}},stop:function(n,t){if(!t){for(t in n)clearInterval(n.watchInterval[t]);n.watchInterval={}}clearInterval(n.watchInterval[t]),n.watchInterval[t]=null}};window.mainColor="#000000",setMainColor(),Watch.start(window.location,"hash",function(){setMainColor()});var Queue=function(){var n=[],t=0;this.add=function(t){n.push(t)},this.next=function(){var e=n[t];return!!e&&(t++,e)},this.getCurrentLength=function(){return n.length}},body=document.getElementsByTagName("body")[0],backgroundColors=document.getElementById("background-color-change").getElementsByTagName("li");(function(){var n=document.getElementsByTagName("head")[0],t=new Queue,e=function(a){if(!a)return!1;var o=document.createElement("script");return o.type="text/javascript",o.src=a,n.appendChild(o),o.onload=function(){e(t.next())},o},a=function(n){t.add(n),1===t.getCurrentLength()&&e(t.next())},o=function(n){var t=new Image;return t.src=n,t},r=document.getElementById("background-color-change").getElementsByTagName("li"),i=r.length,s=Cookies.get("backgroundColors")||"";s=s.split(",");for(var c=0;c<i;){var l=r[c].getElementsByTagName("span")[0];l.innerHTML=s[c]||l.innerHTML,l.style.backgroundColor=l.innerHTML,function(n,t,e){n.addEventListener?n.addEventListener(t,e,!1):n.attachEvent?n.attachEvent("on"+t,function(){e.call(n)}):n["on"+t]=function(){e.call(n)}}(l,"mouseover",backgroundColorChange),c++}var u=Cookies.get("currentBackgroundColor");u&&backgroundColorChange(u),a("js/main.js"),a("http://www.google-analytics.com/ga.js"),o("images/farbtastic/marker.png"),o("images/farbtastic/mask.png"),o("images/farbtastic/wheel.png")}).call(this);